<ion-content>
    <ng-container *ngIf="isLoadingSelectedVideo else finishedLoadingVideo">
        <ion-row>
            <ion-col size="12">
                <ion-spinner name="crescent"></ion-spinner>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12">
                <img src="../../../../assets/images/default_product.png" alt="video_thumbnail"
                     style="object-fit:cover;">
            </ion-col>
        </ion-row>
        <ion-row style="margin:10px 10px 0 10px;">
            <ion-col size="12" style="padding-bottom:0;white-space:normal;word-wrap:break-word;">
                <h3 style="margin-top:0;margin-bottom:0;">
                    <ion-skeleton-text animated="true"></ion-skeleton-text>
                </h3>
            </ion-col>
        </ion-row>
        <ion-row style="margin:0 10px 0 10px;border-bottom:1px solid #e6e6e6;">
            <ion-col size="12">
                <ion-row class="ion-align-items-center">
                    <ion-col size="12" style="text-align:left;">
                        <ion-label style="width:30%;">
                            <ion-skeleton-text animated="true" style="width:30%;"></ion-skeleton-text>
                        </ion-label>
                    </ion-col>
                </ion-row>
            </ion-col>
        </ion-row>
    </ng-container>
    <ng-template #finishedLoadingVideo>
        <ion-row>
            <ion-col size="12" style="padding:0;">
                <ion-button fill="clear" style="margin:0;" (click)="closePlaySelectedVideoModal()">
                    <ion-icon name="close"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-row>
        <!-- TODO: videogular does not support Youtube videos and Dacast -->
        <!--        <ion-row>
            <ion-col size="12">
                <vg-player>
                  <vg-buffering></vg-buffering>
                    <video [vgMedia]="media" #media [id]="'publicVideo_'+publicVideoUid" preload="auto" controls>
                        <source [src]="selectedPublicVideo?.videopath | videoUrlSanitizer" type="video/mp4">
                    </video>
                </vg-player>
            </ion-col>
        </ion-row>-->
        <ion-row>
            <ion-col size="12">
                <iframe [src]="selectedPublicVideo?.videopath | videoUrlSanitizer"
                        style="object-fit:cover;"
                        width="100%"
                        height="100%"
                        frameborder="0"
                        webkitallowfullscreen
                        mozallowfullscreen
                        allowfullscreen></iframe>
            </ion-col>
        </ion-row>
        <ion-row style="margin:10px 10px 0 10px;">
            <ion-col size="12" style="padding-bottom:0;white-space:normal;word-wrap:break-word;">
                <h3 style="font-weight:bold;margin-top:0;margin-bottom:0;">{{selectedPublicVideo?.title}}</h3>
            </ion-col>
        </ion-row>
        <ion-row style="margin:0 10px 0 10px;border-bottom:1px solid #e6e6e6;">
            <ion-col size="12">
                <ion-row class="ion-align-items-center">
                    <ion-col size="12" style="text-align:left;">
                        <ion-label>
                            {{selectedPublicVideo?.view}}&nbsp;Views&nbsp;|&nbsp;{{selectedPublicVideo?.created_at | date: 'mediumDate'}}
                        </ion-label>
                    </ion-col>
                </ion-row>
                <ion-row class="ion-align-items-center">
                    <ion-col size="12" style="text-align:left;">
                        <ion-chip style="margin:0;" color="primary">
                            <ion-icon name="thumbs-up"></ion-icon>
                            <ion-label>{{selectedPublicVideo?.like}}</ion-label>
                        </ion-chip>
                        &nbsp;&nbsp;
                        <ion-chip style="margin:0;" color="tertiary">
                            <ion-icon name="thumbs-down"></ion-icon>
                            <ion-label>{{selectedPublicVideo?.dislike}}</ion-label>
                        </ion-chip>
                    </ion-col>
                </ion-row>
            </ion-col>
        </ion-row>
        <ion-row style="margin:0 10px 0 10px;border-bottom:1px solid #e6e6e6;">
            <ion-col size="12">
                <div style="border:1px solid #e6e6e6;border-radius:5px;padding:10px;">
                    {{selectedPublicVideo?.desc}}
                </div>
            </ion-col>
        </ion-row>
        <ion-row style="margin:0 10px 0 10px;" class="ion-align-items-center">
            <ion-col size="12">
                <ng-container *ngIf="selectedPublicVideo?.free === 1 else publicVideoIsNotFree">
                    <span style="text-decoration:line-through;font-size:18px;">
                        <b>
                            {{selectedPublicVideo?.price | myCurrency}}
                        </b>
                    </span>
                    &nbsp;
                    <span class="badge badge-primary" style="font-size:18px;">
                        FREE
                    </span>
                </ng-container>
                <ng-template #publicVideoIsNotFree>
                    <span style="font-size:18px;">
                        <b>
                            {{selectedPublicVideo?.price | myCurrency}}
                        </b>
                    </span>
                </ng-template>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12">
                <ion-button expand="full" color="primary">
                    Buy Video
                </ion-button>
            </ion-col>
        </ion-row>
    </ng-template>
</ion-content>
